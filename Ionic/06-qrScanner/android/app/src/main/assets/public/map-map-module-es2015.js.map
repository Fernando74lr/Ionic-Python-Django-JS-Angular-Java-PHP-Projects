{"version":3,"sources":["./src/app/pages/map/map.module.ts","./src/app/pages/map/map.page.html","./src/app/pages/map/map.page.ts","./src/app/pages/map/map-routing.module.ts","./src/app/pages/map/map.page.scss"],"names":[],"mappings":"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","file":"map-map-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MapPageRoutingModule } from './map-routing.module';\r\n\r\nimport { MapPage } from './map.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MapPageRoutingModule\r\n  ],\r\n  declarations: [MapPage]\r\n})\r\nexport class MapPageModule {}\r\n","export default \"<ion-content>\\r\\n\\r\\n  <div id='map'></div>\\r\\n\\r\\n  <ion-back-button defaultHref=\\\"/tabs/tab2\\\"\\r\\n                   text=\\\" \\\"\\r\\n                   class=\\\"back-button\\\"\\r\\n                   icon=\\\"close-circle\\\"></ion-back-button>\\r\\n\\r\\n</ion-content>\";","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ndeclare var mapboxgl: any;\r\n\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.page.html',\r\n  styleUrls: ['./map.page.scss'],\r\n})\r\nexport class MapPage implements OnInit, AfterViewInit {\r\n\r\n  lat: number;\r\n  lng: number;\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n  \r\n  ngOnInit() {\r\n    let geo: any = this.route.snapshot.paramMap.get('geo');\r\n\r\n    geo = geo.substring(4);\r\n    geo = geo.split(',');\r\n\r\n    this.lat = Number(geo[0]);\r\n    this.lng = Number(geo[1]);\r\n    \r\n    console.log(this.lat, this.lng)\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiZmVybmFuZG83NGxyIiwiYSI6ImNrZ3NlZGRucDAwZnMycW4yeDgwNDZ6ZnoifQ.WBETnEn0ibpMNFksLJfHbA';\r\n    const map = new mapboxgl.Map({\r\n      style: 'mapbox://styles/mapbox/light-v10',\r\n      center: [this.lng, this.lat],\r\n      zoom: 15.5,\r\n      pitch: 45,\r\n      bearing: -17.6,\r\n      container: 'map',\r\n      antialias: true\r\n    });\r\n\r\n    map.on('load', () => {\r\n\r\n      // Resize Map to the container dimentions\r\n      map.resize();\r\n\r\n      // Default MarkerEdificio Empire State\r\n      var marker = new mapboxgl.Marker()\r\n          .setLngLat([this.lng, this.lat])\r\n          .addTo(map);\r\n\r\n      const layers = map.getStyle().layers;\r\n       \r\n      let labelLayerId;\r\n      for (let i = 0; i < layers.length; i++) {\r\n        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\r\n        labelLayerId = layers[i].id;\r\n        break;\r\n        }\r\n      }\r\n       \r\n      map.addLayer({\r\n        'id': '3d-buildings',\r\n        'source': 'composite',\r\n        'source-layer': 'building',\r\n        'filter': ['==', 'extrude', 'true'],\r\n        'type': 'fill-extrusion',\r\n        'minzoom': 15,\r\n        'paint': {\r\n          'fill-extrusion-color': '#aaa', \r\n          'fill-extrusion-height': [\r\n            'interpolate',\r\n            ['linear'],\r\n            ['zoom'],\r\n            15,\r\n            0,\r\n            15.05,\r\n            ['get', 'height']\r\n          ],\r\n          'fill-extrusion-base': [\r\n            'interpolate',\r\n            ['linear'],\r\n            ['zoom'],\r\n            15,\r\n            0,\r\n            15.05,\r\n            ['get', 'min_height']\r\n          ],\r\n          'fill-extrusion-opacity': 0.6\r\n        }\r\n      },\r\n      labelLayerId\r\n      );\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MapPage } from './map.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MapPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MapPageRoutingModule {}\r\n","export default \"#map {\\n  width: 100% !important;\\n  height: 100% !important;\\n  background-color: #f6f6f4;\\n}\\n\\n.back-button {\\n  position: fixed;\\n  top: 20px;\\n  right: 3px;\\n  font: 23px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFwL21hcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7QUFBSjs7QUFHQTtFQUNJLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLHFCQUFBO0FBQUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXAvbWFwLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4jbWFwIHtcclxuICAgIHdpZHRoOiAxMDAlIWltcG9ydGFudDtcclxuICAgIGhlaWdodDogMTAwJSFpbXBvcnRhbnQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZmNmY0O1xyXG59XHJcblxyXG4uYmFjay1idXR0b24ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAyMHB4O1xyXG4gICAgcmlnaHQ6IDNweDtcclxuICAgIGZvbnQ6IDIzcHghaW1wb3J0YW50O1xyXG59Il19 */\";"],"sourceRoot":"webpack:///"}