{"version":3,"sources":["webpack:///src/app/pages/map/map.module.ts","webpack:///src/app/pages/map/map.page.html","webpack:///src/app/pages/map/map.page.ts","webpack:///src/app/pages/map/map-routing.module.ts","webpack:///src/app/pages/map/map.page.scss"],"names":["MapPageModule","imports","declarations","MapPage","route","geo","snapshot","paramMap","get","substring","split","lat","Number","lng","console","log","mapboxgl","accessToken","map","Map","style","center","zoom","pitch","bearing","container","antialias","on","resize","marker","Marker","setLngLat","addTo","layers","getStyle","labelLayerId","i","length","type","layout","id","addLayer","selector","template","routes","path","component","MapPageRoutingModule","forChild","exports"],"mappings":"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","file":"map-map-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MapPageRoutingModule } from './map-routing.module';\n\nimport { MapPage } from './map.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MapPageRoutingModule\n  ],\n  declarations: [MapPage]\n})\nexport class MapPageModule {}\n","export default \"<ion-content>\\n\\n  <div id='map'></div>\\n\\n  <ion-back-button defaultHref=\\\"/tabs/tab2\\\"\\n                   text=\\\" \\\"\\n                   class=\\\"back-button\\\"\\n                   icon=\\\"close-circle\\\"></ion-back-button>\\n\\n</ion-content>\";","import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\ndeclare var mapboxgl: any;\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.page.html',\n  styleUrls: ['./map.page.scss'],\n})\nexport class MapPage implements OnInit, AfterViewInit {\n\n  lat: number;\n  lng: number;\n\n  constructor(private route: ActivatedRoute) { }\n  \n  ngOnInit() {\n    let geo: any = this.route.snapshot.paramMap.get('geo');\n\n    geo = geo.substring(4);\n    geo = geo.split(',');\n\n    this.lat = Number(geo[0]);\n    this.lng = Number(geo[1]);\n    \n    console.log(this.lat, this.lng)\n  }\n\n  ngAfterViewInit() {\n    mapboxgl.accessToken = 'pk.eyJ1IjoiZmVybmFuZG83NGxyIiwiYSI6ImNrZ3NlZGRucDAwZnMycW4yeDgwNDZ6ZnoifQ.WBETnEn0ibpMNFksLJfHbA';\n    const map = new mapboxgl.Map({\n      style: 'mapbox://styles/mapbox/light-v10',\n      center: [this.lng, this.lat],\n      zoom: 15.5,\n      pitch: 45,\n      bearing: -17.6,\n      container: 'map',\n      antialias: true\n    });\n\n    map.on('load', () => {\n\n      // Resize Map to the container dimentions\n      map.resize();\n\n      // Default MarkerEdificio Empire State\n      var marker = new mapboxgl.Marker()\n          .setLngLat([this.lng, this.lat])\n          .addTo(map);\n\n      const layers = map.getStyle().layers;\n       \n      let labelLayerId;\n      for (let i = 0; i < layers.length; i++) {\n        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\n        labelLayerId = layers[i].id;\n        break;\n        }\n      }\n       \n      map.addLayer({\n        'id': '3d-buildings',\n        'source': 'composite',\n        'source-layer': 'building',\n        'filter': ['==', 'extrude', 'true'],\n        'type': 'fill-extrusion',\n        'minzoom': 15,\n        'paint': {\n          'fill-extrusion-color': '#aaa', \n          'fill-extrusion-height': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            15,\n            0,\n            15.05,\n            ['get', 'height']\n          ],\n          'fill-extrusion-base': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            15,\n            0,\n            15.05,\n            ['get', 'min_height']\n          ],\n          'fill-extrusion-opacity': 0.6\n        }\n      },\n      labelLayerId\n      );\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MapPage } from './map.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MapPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MapPageRoutingModule {}\n","export default \"#map {\\n  width: 100% !important;\\n  height: 100% !important;\\n  background-color: #f6f6f4;\\n}\\n\\n.back-button {\\n  position: fixed;\\n  top: 20px;\\n  right: 3px;\\n  font: 23px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFwL21hcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7QUFBSjs7QUFHQTtFQUNJLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLHFCQUFBO0FBQUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXAvbWFwLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4jbWFwIHtcclxuICAgIHdpZHRoOiAxMDAlIWltcG9ydGFudDtcclxuICAgIGhlaWdodDogMTAwJSFpbXBvcnRhbnQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZmNmY0O1xyXG59XHJcblxyXG4uYmFjay1idXR0b24ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAyMHB4O1xyXG4gICAgcmlnaHQ6IDNweDtcclxuICAgIGZvbnQ6IDIzcHghaW1wb3J0YW50O1xyXG59Il19 */\";"]}