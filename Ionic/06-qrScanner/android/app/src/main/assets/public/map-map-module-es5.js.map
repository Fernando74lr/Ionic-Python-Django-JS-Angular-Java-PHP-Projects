{"version":3,"sources":["webpack:///src/app/pages/map/map.module.ts","webpack:///src/app/pages/map/map.page.html","webpack:///src/app/pages/map/map.page.ts","webpack:///src/app/pages/map/map-routing.module.ts","webpack:///src/app/pages/map/map.page.scss"],"names":["MapPageModule","imports","declarations","MapPage","route","geo","snapshot","paramMap","get","substring","split","lat","Number","lng","console","log","mapboxgl","accessToken","map","Map","style","center","zoom","pitch","bearing","container","antialias","on","resize","marker","Marker","setLngLat","addTo","layers","getStyle","labelLayerId","i","length","type","layout","id","addLayer","selector","template","routes","path","component","MapPageRoutingModule","forChild","exports"],"mappings":"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","file":"map-map-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MapPageRoutingModule } from './map-routing.module';\r\n\r\nimport { MapPage } from './map.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MapPageRoutingModule\r\n  ],\r\n  declarations: [MapPage]\r\n})\r\nexport class MapPageModule {}\r\n","export default \"<ion-content>\\r\\n\\r\\n  <div id='map'></div>\\r\\n\\r\\n  <ion-back-button defaultHref=\\\"/tabs/tab2\\\"\\r\\n                   text=\\\" \\\"\\r\\n                   class=\\\"back-button\\\"\\r\\n                   icon=\\\"close-circle\\\"></ion-back-button>\\r\\n\\r\\n</ion-content>\";","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ndeclare var mapboxgl: any;\r\n\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.page.html',\r\n  styleUrls: ['./map.page.scss'],\r\n})\r\nexport class MapPage implements OnInit, AfterViewInit {\r\n\r\n  lat: number;\r\n  lng: number;\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n  \r\n  ngOnInit() {\r\n    let geo: any = this.route.snapshot.paramMap.get('geo');\r\n\r\n    geo = geo.substring(4);\r\n    geo = geo.split(',');\r\n\r\n    this.lat = Number(geo[0]);\r\n    this.lng = Number(geo[1]);\r\n    \r\n    console.log(this.lat, this.lng)\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiZmVybmFuZG83NGxyIiwiYSI6ImNrZ3NlZGRucDAwZnMycW4yeDgwNDZ6ZnoifQ.WBETnEn0ibpMNFksLJfHbA';\r\n    const map = new mapboxgl.Map({\r\n      style: 'mapbox://styles/mapbox/light-v10',\r\n      center: [this.lng, this.lat],\r\n      zoom: 15.5,\r\n      pitch: 45,\r\n      bearing: -17.6,\r\n      container: 'map',\r\n      antialias: true\r\n    });\r\n\r\n    map.on('load', () => {\r\n\r\n      // Resize Map to the container dimentions\r\n      map.resize();\r\n\r\n      // Default MarkerEdificio Empire State\r\n      var marker = new mapboxgl.Marker()\r\n          .setLngLat([this.lng, this.lat])\r\n          .addTo(map);\r\n\r\n      const layers = map.getStyle().layers;\r\n       \r\n      let labelLayerId;\r\n      for (let i = 0; i < layers.length; i++) {\r\n        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\r\n        labelLayerId = layers[i].id;\r\n        break;\r\n        }\r\n      }\r\n       \r\n      map.addLayer({\r\n        'id': '3d-buildings',\r\n        'source': 'composite',\r\n        'source-layer': 'building',\r\n        'filter': ['==', 'extrude', 'true'],\r\n        'type': 'fill-extrusion',\r\n        'minzoom': 15,\r\n        'paint': {\r\n          'fill-extrusion-color': '#aaa', \r\n          'fill-extrusion-height': [\r\n            'interpolate',\r\n            ['linear'],\r\n            ['zoom'],\r\n            15,\r\n            0,\r\n            15.05,\r\n            ['get', 'height']\r\n          ],\r\n          'fill-extrusion-base': [\r\n            'interpolate',\r\n            ['linear'],\r\n            ['zoom'],\r\n            15,\r\n            0,\r\n            15.05,\r\n            ['get', 'min_height']\r\n          ],\r\n          'fill-extrusion-opacity': 0.6\r\n        }\r\n      },\r\n      labelLayerId\r\n      );\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MapPage } from './map.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MapPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MapPageRoutingModule {}\r\n","export default \"#map {\\n  width: 100% !important;\\n  height: 100% !important;\\n  background-color: #f6f6f4;\\n}\\n\\n.back-button {\\n  position: fixed;\\n  top: 20px;\\n  right: 3px;\\n  font: 23px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFwL21hcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7QUFBSjs7QUFHQTtFQUNJLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLHFCQUFBO0FBQUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9tYXAvbWFwLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4jbWFwIHtcclxuICAgIHdpZHRoOiAxMDAlIWltcG9ydGFudDtcclxuICAgIGhlaWdodDogMTAwJSFpbXBvcnRhbnQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZmNmY0O1xyXG59XHJcblxyXG4uYmFjay1idXR0b24ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAyMHB4O1xyXG4gICAgcmlnaHQ6IDNweDtcclxuICAgIGZvbnQ6IDIzcHghaW1wb3J0YW50O1xyXG59Il19 */\";"]}